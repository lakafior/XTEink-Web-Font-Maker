<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XTEink Font Toolkit</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>XTEink Font Toolkit</h1>
            <p>A web-based tool to convert fonts to the XTEink binary format.</p>
        </header>

        <main>
            <div class="card">
                <h2>1. Select Font and Settings</h2>
                <div class="control-group">
                    <label for="fontFile">Font File (.ttf, .otf):</label>
                    <input type="file" id="fontFile" accept=".ttf,.otf">
                </div>
                <div class="control-group-inline">
                    <div class="control">
                        <label for="fontSize">Font Size:</label>
                        <input type="number" id="fontSize" value="28" min="8" max="128">
                    </div>
                    <div class="control">
                        <label for="charSpacing">Char Spacing (adds to width):</label>
                        <input type="number" id="charSpacing" value="4" min="-10" max="32">
                    </div>
                    <div class="control">
                        <label for="lineSpacing">Line Spacing (adds to height):</label>
                        <input type="number" id="lineSpacing" value="4" min="-10" max="32">
                    </div>
                </div>
                <div class="control-group">
                    <label for="lightnessThreshold">Lightness Threshold (Boldness):</label>
                    <div class="slider-container">
                        <input type="range" id="lightnessThreshold" min="1" max="254" value="127">
                        <span id="lightnessThresholdValue">127</span>
                    </div>
                </div>
                 <div class="control-group-inline">
                    <div class="control">
                        <label for="isVerticalFont" class="checkbox-label">
                            <input type="checkbox" id="isVerticalFont">
                            Vertical Font (for .bin file)
                        </label>
                    </div>
                    <div class="control">
                        <label for="chkRenderBorder" class="checkbox-label">
                            <input type="checkbox" id="chkRenderBorder">
                            Render Border in .bin File
                        </label>
                    </div>
                </div>
                <div class="control-group-inline">
                    <div class="control">
                        <label for="chkRenderAntiAlias" class="checkbox-label">
                            <input type="checkbox" id="chkRenderAntiAlias" checked>
                            Enable Anti-Aliasing
                        </label>
                    </div>
                    <div class="control">
                        <label for="chkRenderGridFit" class="checkbox-label">
                            <input type="checkbox" id="chkRenderGridFit" checked>
                            Enable Grid Fitting (Hinting)
                        </label>
                    </div>
                </div>
                 <div class="control-group-inline">
                    <div class="control">
                        <label for="chkOpticalAlign" class="checkbox-label">
                            <input type="checkbox" id="chkOpticalAlign" checked>
                            Enable Optical Alignment
                        </label>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>2. Preview</h2>
                <div id="fontInfo"></div>
                <div class="control-group">
                    <label for="previewText">Preview Text:</label>
                    <textarea id="previewText" rows="3">Hello Świat 123
Line 2 漢字</textarea>
                </div>
                
                <div class="previews-container">
                    <div class="canvas-container">
                        <label>Glyph Box Preview:</label>
                        <canvas id="glyphCanvas" width="128" height="128"></canvas>
                    </div>
                    <div class="canvas-container text-preview-container">
                        <label>Text Preview (WYSIWYG for .bin file):</label>
                        <canvas id="previewCanvas" height="128"></canvas>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>3. Generate Binary File</h2>
                <div class="control-group">
                    <button id="convertBtn">Convert to .BIN</button>
                    <p id="progressMsg"></p>
                </div>
            </div>
        </main>

        <footer>
            <p>Based on the original <a href="https://github.com/xteink/XTEinkToolkit" target="_blank">XTEinkToolkit</a>. Ported by Gemini.</p>
        </footer>
    </div>

    <script src="opentype.js" defer></script>
    <script type="module" src="app.js"></script>
</body>
</html>