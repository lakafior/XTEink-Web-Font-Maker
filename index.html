<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XTEink Web Font Maker</title>
    <link rel="stylesheet" href="style.css">
    <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <link rel="manifest" href="/icons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <h1>XTEink Web Font Maker</h1>

                <nav class="top-nav">
                    <div class="nav-group">
                        <a target="_blank" rel="noopener noreferrer" class="nav-btn" href="https://www.reddit.com/r/xteinkereader/">Reddit</a>
                        <a target="_blank" rel="noopener noreferrer" class="nav-btn" href="https://github.com/lakafior/XTEink-Web-Font-Toolkit">GitHub</a>
                        <a class="nav-btn" href="gallery.html">Gallery</a>
                    </div>
                </nav>
            </div>
            <p>A web-based tool to convert fonts to the XTEink binary format.</p>
        </header>

        <main>
            <div class="card">
                <h2>1. Select Font and Settings</h2>
                <div class="control-group">
                    <label for="fontFile">Font File (.ttf, .otf):</label>
                    <input type="file" id="fontFile" accept=".ttf,.otf">
                </div>
                <div class="control-group-inline">
                    <div class="control">
                        <label for="fontSize">Font Size:</label>
                        <input type="number" id="fontSize" value="28" min="8" max="128">
                    </div>
                    <div class="control">
                        <label for="charSpacing">Char Spacing (adds to width):</label>
                        <input type="number" id="charSpacing" value="4" min="-10" max="32">
                    </div>
                    <div class="control">
                        <label for="lineSpacing">Line Spacing (adds to height):</label>
                        <input type="number" id="lineSpacing" value="4" min="-10" max="32">
                    </div>
                </div>
                <div class="control-group">
                    <label for="lightnessThreshold">Lightness Threshold (Boldness):</label>
                    <div class="slider-container">
                        <input type="range" id="lightnessThreshold" min="1" max="254" value="127">
                        <span id="lightnessThresholdValue">127</span>
                    </div>
                </div>
                 <div class="control-group-inline">
                    <div class="control">
                        <label for="isVerticalFont" class="checkbox-label">
                            <input type="checkbox" id="isVerticalFont">
                            Vertical Font (for .bin file)
                        </label>
                    </div>
                    <div class="control">
                        <label for="chkRenderBorder" class="checkbox-label">
                            <input type="checkbox" id="chkRenderBorder">
                            Render Border in .bin File
                        </label>
                    </div>
                </div>
                <div class="control-group-inline">
                    <div class="control">
                        <label for="chkRenderAntiAlias" class="checkbox-label">
                            <input type="checkbox" id="chkRenderAntiAlias" checked>
                            Enable Anti-Aliasing
                        </label>
                    </div>
                    <div class="control">
                        <label for="chkRenderGridFit" class="checkbox-label">
                            <input type="checkbox" id="chkRenderGridFit" checked>
                            Enable Grid Fitting (Hinting)
                        </label>
                    </div>
                </div>
                 <div class="control-group-inline">
                    <div class="control">
                        <label for="chkOpticalAlign" class="checkbox-label">
                            <input type="checkbox" id="chkOpticalAlign" checked>
                            Enable Optical Alignment
                        </label>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>2. Preview</h2>
                <div id="fontInfo"></div>
                <div class="control-group">
                    <label for="previewText">Preview Text:</label>
                    <textarea id="previewText" rows="3">ZaÅ¼Ã³Å‚Ä‡ gÄ™Å›lÄ… jaÅºÅ„ 123
"Ã¼ber den groÃŸen"
the quick brown fox</textarea>
                </div>
                
                <div class="previews-container">
                    <div class="canvas-container">
                        <label>Glyph Box Preview:</label>
                        <canvas id="glyphCanvas" width="128" height="128"></canvas>
                    </div>
                    <div class="canvas-container text-preview-container">
                        <label>Text Preview (WYSIWYG for .bin file):</label>
                        <canvas id="previewCanvas" height="128"></canvas>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>3. Generate Binary File</h2>
                <div class="control-group">
                    <button id="convertBtn">Convert to .BIN</button>
                    <p id="progressMsg"></p>
                </div>
                <div class="control-group">
                    <h3>Publish to Gallery (via server)</h3>
                    <p>Click to send the generated files to the server which will create a PR for you. After approving PR by repo maintainers it will be shown in <a href="gallery.html">gallery.</a></p>
                    <label for="submitterName">Your name (optional):</label>
                    <input type="text" id="submitterName" placeholder="Anonymous">
                    <div style="margin-top:8px;">
                        <button id="saveServerBtn">Save to gallery</button>
                        <span id="saveServerStatus" style="margin-left:8px"></span>
                    </div>
                </div>
            </div>
        </main>

<footer>
<p>Based on the original <a href="https://gitee.com/ZYFDroid/xteink-toolkit" target="_blank">XTEinkToolkit</a>. Made in ðŸ‡µðŸ‡± by <a href="https://github.com/lakafior/XTEink-Web-Font-Toolkit" target="_blank">Lakafior.</a></p>
</footer>
    </div>
    <script type="module" src="app.js"></script>
</body>
</html>
